gTraderList = [
	//backpacks
	["B_Messenger_Olive_F", 2000, 300],
	["B_Messenger_Gray_F", 2000, 300],
	["B_Messenger_Coyote_F", 2000, 300],
	["B_Messenger_Black_F", 2000, 300],
	["B_FieldPack_ocamo_ReconMedic", 0, 30000], //CSAT team equipment
	["B_FieldPack_khk", 6000, 2000],
	["B_TacticalPack_blk", 10000, 3000],
	["B_Kitbag_rgr", 15000, 7000],
	["B_Kitbag_mcamo", 15000, 7000],
	["B_Kitbag_sgg", 15000, 7000],
	["B_Kitbag_cbr", 15000, 7000],
	["B_AssaultPack_blk", 6000, 3000],
	["B_AssaultPack_ocamo", 6000, 3000],
	["B_AssaultPack_sgg", 6000, 3000],
	["B_AssaultPack_mcamo", 5600000, 3000],
	["B_AssaultPack_khk", 6000, 3000],
	["B_AssaultPack_rgr", 6000, 3000],
	["B_TacticalPack_oli", 10000, 3000],
	["B_TacticalPack_rgr", 10000, 3000],
	["B_Carryall_cbr", 12000, 5000],
	["B_Carryall_ocamo", 12000, 5000],
	["B_Carryall_oucamo", 12000, 5000],
	["B_Carryall_oli", 12000, 5000],
	["B_Carryall_mcamo", 12000, 5000],
	["B_Carryall_khk", 12000, 5000],
	//uniforms
	["U_O_SpecopsUniform_ocamo", 0, 30000], //CSAT team equipment
	["U_B_CombatUniform_mcam", 2000, 250],
	["U_B_CombatUniform_mcam_tshirt", 2000, 250],
	["U_B_CombatUniform_mcam_worn", 2000, 250],
	["U_BG_Guerilla2_1", 2000, 250],
	["U_BG_Guerilla2_2", 2000, 250],
	["U_BG_Guerilla2_3", 2000, 250],
	["U_BG_Guerilla3_1", 2000, 250],
	["U_BG_Guerilla1_1", 2000, 250],
	["U_BG_Guerrilla_6_1", 2000, 250],
	["U_B_CTRG_1", 0, 1000],
	["U_B_CTRG_2", 0, 1000],
	["U_B_CTRG_3", 0, 1000],
	["U_BG_leader", 0, 50000], //Boss equipment
	["U_BG_Guerilla1_2_F", 0, 250], //Boss guard equipment
	//vests
	["V_HarnessOGL_brn", 40000, 20000], //CSAT team equipment
	["V_HarnessO_brn", 40000, 20000], //CSAT team equipment
	["V_HarnessO_gry", 20000, 10000],
	["V_TacVestIR_blk", 40000, 20000],
	["V_TacVest_blk", 40000, 20000],
	["V_TacVest_camo", 40000, 20000],
	["V_TacVest_oli", 40000, 20000],
	["V_TacVest_blk_POLICE", 0, 20000], //Boss guard equipment
	["V_Chestrig_oli", 20000, 6000],
	["V_Chestrig_khk", 20000, 6000],
	["V_Chestrig_rgr", 20000, 6000],
	["V_PlateCarrier1_rgr", 100000, 50000],
	["V_PlateCarrier1_blk", 100000, 50000],
	["V_PlateCarrierIA1_dgtl", 100000, 50000],
	["V_PlateCarrierIA2_dgtl", 100000, 50000],
	["V_PlateCarrierH_CTRG", 150000, 80000],
	["V_PlateCarrier2_blk", 150000, 80000],
	["V_PlateCarrier2_rgr", 150000, 80000],
	["V_PlateCarrierL_CTRG", 100000, 50000],
	//Helmets
	["H_HelmetSpecO_blk", 0, 15000], //CSAT team equipment
	["H_HelmetLeaderO_ocamo", 0, 20000], //CSAT team equipment
	["H_HelmetSpecO_ocamo", 0, 15000], //CSAT team equipment
	["H_Booniehat_oli", 500, 100],
	["H_Booniehat_mcamo", 500, 100],
	["H_Booniehat_khk", 500, 100],
	["H_Cap_blk", 500, 100],
	["H_Cap_grn", 500, 100],
	["H_Cap_oli", 500, 100],
	["H_Cap_blk_ION", 500, 100],
	["H_Cap_press", 500, 100],
	["H_Cap_blk_Raven", 500, 100],
	["H_Cap_khaki_specops_UK", 500, 100],
	["H_Cap_tan_specops_US", 500, 100],
	["H_Cap_usblack", 500, 100],
	["H_Cap_police", 0, 2000], //Boss guard equipment
	["H_Cap_brn_SPECOPS", 500, 100],
	["H_Cap_red", 500, 100],
	["H_Cap_blu", 500, 100],
	["H_StrawHat_dark", 500, 100],
	["H_Bandanna_camo", 500, 100],
	["H_Beret_02", 500, 100],
	["H_Beret_grn", 0, 50000], //Boss equipment
	["H_Hat_brown", 500, 100],
	["H_Cap_tan", 500, 100],
	["H_Bandanna_blu", 500, 100],
	["H_Bandanna_cbr", 500, 100],
	["H_Booniehat_khk_hs", 500, 100],
	["H_Booniehat_tan", 500, 100],
	["H_Watchcap_cbr", 500, 100],
	["H_HelmetB", 15000, 8000],
	["H_HelmetB_sand", 15000, 8000],
	["H_HelmetSpecB", 15000, 8000],
	["H_HelmetSpecB_blk", 15000, 8000],
	["H_HelmetSpecB_paint2", 15000, 8000],
	["H_HelmetSpecB_paint1", 15000, 8000],
	["H_HelmetSpecB_sand", 15000, 8000],
	["H_HelmetSpecB_snakeskin", 15000, 8000],
	//goggles
	["G_Balaclava_oli", 500, 100],
	["G_Balaclava_blk", 500, 100],
	["G_Bandanna_beast", 500, 100],
	["G_Bandanna_khk", 500, 100],
	["G_Bandanna_blk", 500, 100],
	["G_Bandanna_oli", 500, 100],
	["G_Bandanna_tan", 500, 100],
	["G_Balaclava_combat", 500, 100],
	["G_Combat", 500, 100],
	["G_Aviator", 0, 50000], //Boss equipment
	//items
	["NVGoggles_OPFOR", 1000000, 500000], //CSAT team equipment
	["NVGoggles", 700000, 350000],
	["ItemRadio", 20000, 10000],
	["ItemWatch", 20000, 10000],
	["ItemCompass", 20000, 10000],
	["FirstAidKit", 3000, 1500],
	["Chemlight_blue", 200, 50],
	["Chemlight_green", 200, 50],
	["Chemlight_red", 200, 50],
	["Chemlight_yellow", 200, 50],
	["MineDetector", 80000, 40000],
	//guns
	["hgun_Pistol_heavy_02_F", 5000, 2500],
	["hgun_Rook40_F", 5000, 2500],
	["hgun_P07_F", 5000, 2500],
	["hgun_ACPC2_F", 5000, 2500],
	["hgun_Pistol_heavy_01_F", 5000, 2500],
	//submachines
	["hgun_PDW2000_F", 40000, 20000],
	["SMG_02_F", 80000, 40000],
	["SMG_01_F", 60000, 30000],
    ["SMG_05_F", 90000, 50000],
	["SMG_03_TR_black", 0, 90000],
	["SMG_03C_TR_black", 0, 90000],
	//rifles
	["arifle_Katiba_C_F", 250000, 125000], //CSAT team equipment
	["arifle_SPAR_01_blk_F", 300000, 160000], //special
	["arifle_SPAR_03_blk_F", 400000, 220000], //special
	["arifle_Katiba_F", 250000, 125000],
	["arifle_Katiba_GL_F", 280000, 150000],
	["arifle_Mk20_plain_F", 250000, 125000],
	["arifle_Mk20_F", 250000, 125000],
	["arifle_Mk20_GL_plain_F", 280000, 150000],
	["arifle_Mk20_GL_F", 280000, 150000],
	["arifle_TRG20_F", 250000, 125000],
	["arifle_TRG21_F", 250000, 125000],
	["arifle_TRG21_GL_F", 280000, 150000],
	["arifle_MX_F", 250000, 125000],
	["arifle_MX_Black_F", 250000, 125000],
	["arifle_MX_GL_F", 280000, 150000],
	["arifle_MX_GL_Black_F", 280000, 150000],
	["arifle_MXC_F", 250000, 125000],
	["arifle_MXC_Black_F", 250000, 125000],
	["arifle_MXM_F", 300000, 150000],
	["arifle_MXM_Black_F", 300000, 150000],
	["arifle_AK12_F", 300000, 160000],
	["arifle_AKS_F", 200000, 100000],
	["arifle_AKM_F", 250000, 130000],
	["arifle_MX_SW_F", 360000, 180000],
	["arifle_MX_SW_Black_F", 360000, 180000],
	//sniper rifles
	["srifle_EBR_F", 350000, 180000],
  	["srifle_DMR_01_F", 350000, 180000],
	//machine guns
	["LMG_Mk200_F", 280000, 150000],
	["LMG_Zafir_F", 280000, 150000],
	//magazines
	["1Rnd_HE_Grenade_shell", 6000, 3000],
	["1Rnd_Smoke_Grenade_shell", 1000, 500],
	["16Rnd_9x21_Mag", 2000, 500],
	["30Rnd_9x21_Mag", 3000, 1500],
	["30Rnd_9x21_Mag_SMG_02", 3000, 1500],
	["6Rnd_45ACP_Cylinder", 500, 250],
	["9Rnd_45ACP_Mag", 1000, 500],
	["11Rnd_45ACP_Mag", 1500, 750],
	["30Rnd_45ACP_Mag_SMG_01", 3000, 1500],
	["30Rnd_545x39_Mag_F", 5000, 2500],
	["30Rnd_545x39_Mag_Tracer_Green_F", 5000, 2500],
	["30Rnd_556x45_Stanag", 5000, 2500],
	["30Rnd_556x45_Stanag_Tracer_Red", 5000, 2500],
	["30Rnd_556x45_Stanag_Tracer_Green", 5000, 2500],
	["30Rnd_556x45_Stanag_Tracer_Yellow", 5000, 2500],
	["30Rnd_556x45_Stanag_green", 5000, 2500],
	["30Rnd_556x45_Stanag_red", 5000, 2500],
	["30Rnd_65x39_caseless_green", 6000, 3000],
	["30Rnd_65x39_caseless_mag", 6000, 3000],
	["30Rnd_65x39_caseless_mag_Tracer", 6000, 3000],
	["30Rnd_65x39_caseless_black_mag", 6000, 3000],
	["100Rnd_65x39_caseless_mag", 6000, 3000],
	["100Rnd_65x39_caseless_mag_Tracer", 10000, 5500],
	["100Rnd_65x39_caseless_black_mag", 10000, 5500],
	["200Rnd_65x39_cased_Box", 15000, 7500],
	["200Rnd_65x39_cased_Box_Tracer", 15000, 7500],
	["30Rnd_762x39_Mag_F", 7000, 3500],
	["30Rnd_762x39_Mag_Tracer_Green_F", 7000, 3500],
	["150Rnd_762x54_Box", 15000, 7500],
	["10Rnd_762x54_Mag", 3000, 1500],
	["20Rnd_762x51_Mag", 4000, 2000],
	["50Rnd_570x28_SMG_03", 0, 10000],
	//attachments
	["bipod_01_F_blk", 1000, 500],
	["acc_flashlight_pistol", 1000, 500],
	["acc_flashlight", 1000, 250],
	["acc_flashlight_smg_01", 1000, 250],
	["bipod_02_F_blk", 1000, 500], //CSAT team equipment
	["acc_pointer_IR", 15000, 8000], //CSAT team equipment
	//optics
	["optic_MRD", 5000, 2500],
	["optic_Aco", 9000, 5000],
	["optic_Aco_grn", 9000, 5000],
	["optic_Aco_smg", 9000, 5000],
	["optic_Aco_grn_smg", 9000, 5000],
	["optic_MRCO", 15000, 8000],
	["optic_Hamr", 20000, 10000],
	["optic_DMS", 100000, 50000],
	["optic_LRPS", 100000, 50000],
	["optic_Arco", 14000, 7000],
	["optic_SOS", 100000, 50000],
	["optic_Holosight", 10000, 5000],
	["optic_Holosight_smg", 10000, 5000],
	["optic_ERCO_blk_F", 15000, 7500], //special
	["optic_tws", 500000, 250000], //special
	["optic_NVS", 500000, 250000], //special
	["optic_Arco_blk_F", 15000, 8000], //CSAT team equipment
	["optic_Holosight_smg_blk_F", 0, 10000],
	["optic_Holosight_blk_F", 0, 10000],
	//silencers
	["muzzle_snds_acp", 20000, 10000],
	["muzzle_snds_B", 20000, 10000],
	["muzzle_snds_H", 20000, 10000],	
	["muzzle_snds_L", 20000, 10000],
	["muzzle_snds_M", 20000, 10000],
	["muzzle_snds_570", 0, 20000],
	//grenades
	["MiniGrenade", 5000, 3000],
	["HandGrenade", 8000, 5000],
	["SmokeShell", 1000, 500],
	["SmokeShellRed", 1000, 500],
	["SmokeShellOrange", 1000, 500],
	["SmokeShellYellow", 1000, 500]
];

fnc_TraderGetConfig = {
    params["_item"];

    switch true do
    {
        case(isClass(configFile >> "CfgMagazines" >> _item)): {"CfgMagazines"};
        case(isClass(configFile >> "CfgWeapons" >> _item)): {"CfgWeapons"};
        case(isClass(configFile >> "CfgVehicles" >> _item)): {"CfgVehicles"};
        case(isClass(configFile >> "CfgGlasses" >> _item)): {"CfgGlasses"};
    };
};

fnc_traderItemInTraderList = {
	private _item = _this select 0;
	private _found = false;

	scopeName "exit";

	{
		if((_x select 0) == _item) then
		{
			_found = true;
			breakTo "exit";
		};
	} forEach gTraderList;

	_found
};

fnc_traderGetItemsDesc = {
	private _items = _this;
	private _result = [];

	{
		private _config = [_x select 0] call fnc_TraderGetConfig;
		private _name = getText(configFile >> _config >> _x select 0 >> "DisplayName");
		private _ammoCount = _x select 1;
		private _magazineSize = getNumber(configfile >> _config >> _x select 0 >> "count");
		private _text = "";

		if((_magazineSize == 1 && _ammoCount == 1) || _magazineSize == 0) then
		{
			_text = format["%1", _name];
		}
		else
		{
			_text = format["%1 (%2/%3)", _name, _ammoCount, _magazineSize];
		};

		if(_x select 0 == "acc_flashlight_smg_01") then
		{
			_text = _text + " (SMG)";	
		};

		_result = _result + [_text];
	} forEach _items;

	_result
};

fnc_traderProcessCrate = {
	private _crate = gTraderBoxes select gTraderBoxIndex;
	private _cargo = "";

	if (alive _crate) then
	{
		// magazines
		private _ammo = magazinesAmmoCargo _crate;
		
		// items
		private _items = getItemCargo _crate;
		
		//backpacks
		private _backpacks = getBackpackCargo _crate;
		
		private _weapons = [[],[]];

		// weapons
		{
			{
				// base weapon without any attachments
				if (_forEachIndex == 0) then 
				{
					_weapons select 0 append [[_x] call BIS_fnc_baseWeapon];
					_weapons select 1 append [1];
				}
				else
				{
					// mags
					if (typeName _x == "ARRAY") then {
						if (count _x > 0) then {
							_ammo = _ammo + [[_x select 0 , _x select 1]];
						};
					};
					// attachments
					if (typeName _x == "STRING") then {
						if (_x != "") then {
							_items select 0 append [_x];
							_items select 1 append [1];
						};
					};
				}
			} forEach _x;
			
		} forEach weaponsItemsCargo _crate;
		
		// containers
		{
			// magazines
			_ammo append magazinesAmmoCargo (_x select 1);
			
			// items
			{
				if (_forEachIndex == 0) then 
				{
					_items select 0 append _x;
				};
				
				if (_forEachIndex == 1) then 
				{
					_items select 1 append _x;
				};
			} forEach getItemCargo (_x select 1);
			
			// weapons
			{
				{
					// base weapon without any attachments
					if (_forEachIndex == 0) then 
					{
						_weapons select 0 append [[_x] call BIS_fnc_baseWeapon];
						_weapons select 1 append [1];
					}
					else
					{
						// mags
						if (typeName _x == "ARRAY") then {
							if (count _x > 0) then {
								_ammo = _ammo + [[_x select 0 , _x select 1]];
							};
						};
						// attachments
						if (typeName _x == "STRING") then {
							if (_x != "") then {
								_items select 0 append [_x];
								_items select 1 append [1];
							};
						};
					}
				} forEach _x;
			} forEach weaponsItemsCargo (_x select 1);
			
		} forEach everyContainer _crate;
		
		_cargo = [_weapons, _ammo, _items, _backpacks];

		clearWeaponCargoGlobal _crate;
		clearMagazineCargoGlobal _crate;
		clearItemCargoGlobal _crate;
		clearBackpackCargoGlobal _crate;

		if (!(isNil "_cargo")) then 
		{
			if (typeName _cargo == "ARRAY") then 
			{
				private _weapons = _cargo select 0;
				private _ammo = _cargo select 1;
				private _items = _cargo select 2;
				private _backpacks = _cargo select 3;
				
				for "_i" from 0 to ((count (_weapons select 0)) - 1) do {
					_crate addWeaponWithAttachmentsCargoGlobal [[((_weapons select 0) select _i), "", "", "", [], [], ""], ((_weapons select 1) select _i)];
				};

				_ammo = [_ammo] call fnc_balance_magazines;
				
				{
					_crate addMagazineAmmoCargo [_x select 0, 1, _x select 1];
				}
				forEach (_ammo);
				
				for "_i" from 0 to ((count (_items select 0)) - 1) do {
					_crate addItemCargoGlobal [((_items select 0) select _i), ((_items select 1) select _i)];
				};
				
				for "_i" from 0 to ((count (_backpacks select 0)) - 1) do {
					_crate addBackpackCargoGlobal [((_backpacks select 0) select _i), ((_backpacks select 1) select _i)];
				};
			};
		};

		// clear all containers
		{
			clearMagazineCargoGlobal (_x select 1);
			clearItemCargo (_x select 1);
			clearWeaponCargoGlobal (_x select 1);
		} foreach (everyContainer _crate);
	};
};

fnc_traderCheckPayment = {
	private _crate = gTraderBoxes select gTraderBoxIndex;
	private _newPayment = [];

	// magazines
	private _ammo = magazinesAmmoCargo _crate;
	
	// items
	private _items = getItemCargo _crate;
	
	//backpacks
	private _backpacks = getBackpackCargo _crate;

	//weapons 
	private _weapons = [];

	{
		{
			// base weapon without any attachments
			if (_forEachIndex == 0) then 
			{
				_weapons = _weapons + [[_x] call BIS_fnc_baseWeapon];
			}
		} forEach _x;
		
	} forEach weaponsItemsCargo _crate;

	private _stuff = [];
	
	{
		_stuff = _stuff + [_x];
	} forEach _ammo;

	if(count (_items select 0) > 0) then
	{
		{
			for "_i" from 1 to (_items select 1 select _forEachIndex) do 
			{
				_stuff = _stuff + [[_x, 1]];
			};
		} forEach (_items select 0);
	};

	if(count (_backpacks select 0) > 0) then
	{
		{
			for "_i" from 1 to (_backpacks select 1 select _forEachIndex) do 
			{
				_stuff = _stuff + [[_x, 1]];
			};
		} forEach (_backpacks select 0);
	};

	{
		_stuff = _stuff + [[_x, 1]];
	} forEach _weapons;

	{
		private _found = -1;

		scopeName "exit";

		for "_i" from 0 to ((count _stuff)-1) do 
		{
			if(_stuff select _i select 0 == _x select 0 && _stuff select _i select 1 == _x select 1) then
			{
				_found = _i;
				_stuff deleteAt _found;
				breakTo "exit";
			};
		};

		if(_found == -1) then
		{
			_newPayment = _newPayment + [_x];
		};
	} forEach gTraderPayment;

	gTraderPayment = _newPayment;

	clearWeaponCargoGlobal _crate;
	clearMagazineCargoGlobal _crate;
	clearItemCargoGlobal _crate;
	clearBackpackCargoGlobal _crate;

	if(count gTraderPayment == 0) then
	{
		[["traderState", 2]] call fnc_saveData;
		saveProfileNamespace;

		gTraderState = 2;
	};
};

fnc_traderFillOrderCrate = {
	private _crate = gTraderBoxes select gTraderBoxIndex;

	clearWeaponCargoGlobal _crate;
	clearMagazineCargoGlobal _crate;
	clearItemCargoGlobal _crate;
	clearBackpackCargoGlobal _crate;

	{
		private _item = _x select 0;
		private _type = [ _item ] call BIS_fnc_itemType;
		switch ( toUpper ( _type select 0 ) ) do {
			case "MINE";
			case "MAGAZINE" : {
				_crate addMagazineCargoGlobal [ _item, 1 ];
			};
			case "ITEM" : {
				_crate addItemCargoGlobal [ _item, 1 ];
			};
			case "WEAPON" : {
				_crate addWeaponCargoGlobal [ _item, 1 ];
			};
			case "EQUIPMENT" : {
				if ( _type select 1 == "backpack" ) then {
					_crate addBackpackCargoGlobal [ _item, 1 ];
				}else{
					_crate addItemCargoGlobal [ _item, 1 ];
				};
			};
		};
	} forEach gTraderPurchase;

	// clear all containers
	{
		clearMagazineCargoGlobal (_x select 1);
		clearItemCargo (_x select 1);
		clearWeaponCargoGlobal (_x select 1);
	} foreach (everyContainer _crate);
};

fnc_traderSaveCrate = {
	private _crate = gTraderBoxes select gTraderBoxIndex;

	private _cargo = "";

	if (alive _crate) then
	{
		// magazines
		private _ammo = magazinesAmmoCargo _crate;
		
		// items
		private _items = getItemCargo _crate;
		
		//backpacks
		private _backpacks = getBackpackCargo _crate;
		
		private _weapons = [[],[]];

		// weapons
		{
			{
				// base weapon without any attachments
				if (_forEachIndex == 0) then 
				{
					_weapons select 0 append [[_x] call BIS_fnc_baseWeapon];
					_weapons select 1 append [1];
				}
				else
				{
					// mags
					if (typeName _x == "ARRAY") then {
						if (count _x > 0) then {
							_ammo = _ammo + [[_x select 0 , _x select 1]];
						};
					};
					// attachments
					if (typeName _x == "STRING") then {
						if (_x != "") then {
							_items select 0 append [_x];
							_items select 1 append [1];
						};
					};
				}
			} forEach _x;
			
		} forEach weaponsItemsCargo _crate;
		
		// containers
		{
			// magazines
			_ammo append magazinesAmmoCargo (_x select 1);
			
			// items
			{
				if (_forEachIndex == 0) then 
				{
					_items select 0 append _x;
				};
				
				if (_forEachIndex == 1) then 
				{
					_items select 1 append _x;
				};
			} forEach getItemCargo (_x select 1);
			
			// weapons
			{
				{
					// base weapon without any attachments
					if (_forEachIndex == 0) then 
					{
						_weapons select 0 append [[_x] call BIS_fnc_baseWeapon];
						_weapons select 1 append [1];
					}
					else
					{
						// mags
						if (typeName _x == "ARRAY") then {
							if (count _x > 0) then {
								_ammo = _ammo + [[_x select 0 , _x select 1]];
							};
						};
						// attachments
						if (typeName _x == "STRING") then {
							if (_x != "") then {
								_items select 0 append [_x];
								_items select 1 append [1];
							};
						};
					}
				} forEach _x;
			} forEach weaponsItemsCargo (_x select 1);
			
		} forEach everyContainer _crate;
		
		_cargo = [_weapons, _ammo, _items, _backpacks];
	};

	[["traderCrate", _cargo]] call fnc_saveData;
	saveProfileNamespace;
};

fnc_traderLoadCrate = {
	private _crate = gTraderBoxes select gTraderBoxIndex;

	clearWeaponCargoGlobal _crate;
	clearMagazineCargoGlobal _crate;
	clearItemCargoGlobal _crate;
	clearBackpackCargoGlobal _crate;

	private _cargo = ["traderCrate", nil] call fnc_loadData;

	if (!(isNil "_cargo")) then 
	{
		if (typeName _cargo == "ARRAY") then 
		{
			private _weapons = _cargo select 0;
			private _ammo = _cargo select 1;
			private _items = _cargo select 2;
			private _backpacks = _cargo select 3;
			
			for "_i" from 0 to ((count (_weapons select 0)) - 1) do {
				_crate addWeaponWithAttachmentsCargoGlobal [[((_weapons select 0) select _i), "", "", "", [], [], ""], ((_weapons select 1) select _i)];
			};
			
			{
				_crate addMagazineAmmoCargo [_x select 0, 1, _x select 1];
			}
			forEach (_ammo);
			
			for "_i" from 0 to ((count (_items select 0)) - 1) do {
				_crate addItemCargoGlobal [((_items select 0) select _i), ((_items select 1) select _i)];
			};
			
			for "_i" from 0 to ((count (_backpacks select 0)) - 1) do {
				_crate addBackpackCargoGlobal [((_backpacks select 0) select _i), ((_backpacks select 1) select _i)];
			};
		};
	};

	// clear all containers
	{
		clearMagazineCargoGlobal (_x select 1);
		clearItemCargo (_x select 1);
		clearWeaponCargoGlobal (_x select 1);
	} foreach (everyContainer _crate);
};

fnc_traderResetCrates = {
	{
		clearWeaponCargoGlobal _x;
		clearMagazineCargoGlobal _x;
		clearItemCargoGlobal _x;
		clearBackpackCargoGlobal _x;
	} foreach gTraderBoxes;
};

fnc_getTraderDiscount = {
	private _deals = 10 min (["traderDiscountDeals", 0] call fnc_loadData);
	gDiscount = _deals * 5;
	gDiscount
};